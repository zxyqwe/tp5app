<div class="page">
    <div class="page__hd">
        <h1 class="page__title">下届吧务组选举投票</h1>
    </div>
    <div class="page__bd page__bd_spacing sr-only" id="votemain">
        <div class="weui-cells__title">候选人，可多选，可弃权。</div>
        <div class="weui-cells weui-cells_checkbox">
            <label class="weui-cell weui-check__label" v-for="i in candi">
                <div class="weui-cell__hd">
                    <input type="checkbox" class="weui-check" v-model="ans" v-bind:value="{ i.v }">
                    <i class="weui-icon-checked"></i>
                </div>
                <div class="weui-cell__bd">
                    <p>{{ i.n }}</p>
                </div>
            </label>
        </div>
        <div class="weui-flex">
            <div class="weui-flex__item">
                <div class="placeholder">
                    <a v-if="unvote" v-on:click="sub()" href="javascript:"
                       class="weui-btn weui-btn_plain-primary">投票无悔</a>
                    <p v-else>已投票：{{ ans_res }}</p>
                </div>
            </div>
        </div>
        <div class="weui-panel" v-if="result">
            <div class="weui-panel__hd">
                投票结果
            </div>
            <div class="weui-panel__bd">
            </div>
            <div class="weui-panel__ft">
            </div>
        </div>
    </div>
    <div class="page__ft">
        <div class="sr-only" id="data">
            {$data}
        </div>
    </div>
</div>
<script type="text/javascript">
    //ToDo
    var vote = (function ($, Vue, w, undefined) {
        'use strict';
        var vmain, cand = ['aaa-bbb', 'ccc-ddd', 'eee-fff'];
        var init = function () {
            vmain = new Vue({
                el: '#votemain',
                data: {
                    candi: [],
                    ans: [],
                    unvote: true,
                    result: false
                },
                methods: {
                    sub: function () {
                        console.log(this.ans);
                    }
                },
                ready: function () {
                    for (var i in cand) {
                        var tmp = cand[i];
                        this.candy.push({v: tmp.split('-')[0], n: tmp})
                    }
                }
            })
            ;
        };
        return {
            init: init
        };
    })(Zepto, Vue, window);
    vote.init();
</script>