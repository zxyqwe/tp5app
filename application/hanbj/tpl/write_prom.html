{layout name="layout_pc" /}
<div class="container-fluid" style="padding-bottom: 70px;">
    <div id="container" class="col-md-10 col-md-offset-1 column">
        <h1>商家优惠登记</h1>
        <div id="body">
            <div id="toolbar">
                <div class="form-inline" role="form">
                    <div class="form-group" style="margin-right: 1em">
                        <input id="add_name" type="text" class="form-control" placeholder="商户名称">
                    </div>
                    <button type="button" class="btn btn-default" id="add_prom">添加商家</button>
                </div>
            </div>
            <table id="table"
                   data-toolbar="#toolbar"
                   data-url="/hanbj/write/edit_prom"
                   data-editable-url="/hanbj/write/edit_prom">
                <thead>
                <tr>
                    <th data-field="id" class="sr-only">ID</th>
                    <th data-field="name">商户名称</th>
                    <th data-field="img" data-editable="true">Logo</th>
                    <th data-field="desc" data-editable="true">描述信息</th>
                    <th data-field="info" data-editable="true">尾注信息</th>
                    <th data-field="show" data-editable="true">是否显示</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>
<script>
    var nav = 'nav3_6';
    $(window).on("load", function () {
        wprom.init();
    });
    var wprom = (function ($, w, undefined) {
        'use strict';
        var $table, $add_name;
        var init = function () {
            $add_name = $('#add_name');
            $('#add_prom').click(function () {
                w.waitloading();
                $.ajax({
                    type: "POST",
                    url: w.u19,
                    data: {
                        name: $add_name.val()
                    },
                    dataType: "json",
                    success: function (msg) {
                        $table.bootstrapTable('refresh');
                    },
                    error: w.msgto,
                    complete: function () {
                        w.cancelloading();
                    }
                });
            });
            $table = $('#table');
            $table.bootstrapTable({});
        };
        return {
            init: init
        };
    })(jQuery, window);
</script>