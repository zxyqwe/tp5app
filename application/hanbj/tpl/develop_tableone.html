{layout name="layout_pc" /}
<div class="container-fluid" style="padding-bottom: 70px;">
    <div id="container" class="col-md-10 col-md-offset-1 column" v-cloak>
        <h1>{{ table_name }}</h1>
        <div id="body">
            {$data}
        </div>
    </div>
</div>
<script>
    var nav = 'nav6_4';

    var tableone = (function ($, Vue, w, undefined) {
        'use strict';
        var table_name = '';
        var build_vue = function () {
            var vmain = new Vue({
                el: '#container',
                data: {
                    table_name: table_name,
                    table: []
                }
            });
            w.waitloading();
            $.ajax({
                type: "POST",
                url: w.u21,
                data: {
                    _ajax: 1,
                    'name': table_name
                },
                dataType: "json",
                success: function (msg) {
                    vmain.table = msg;
                },
                error: function (jqXHR, msg, ethrow) {
                    vmain.table = [];
                    w.msgto(jqXHR, msg, ethrow);
                },
                complete: function () {
                    w.cancelloading();
                }
            });
        };
        var init = function () {
            table_name = window.location.pathname.split('/').last();
            build_vue();
        };
        return {
            init: init
        };
    })(jQuery, Vue, window);

    $(window).on("load", function () {
        tableone.init();
    });
</script>
